<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IAIWAF Video Hub</title>
  <script type="module" src="firebase.js"></script>
  <script type="module">
    import { collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    async function loadVideos() {
      const q = query(collection(window.db, "videos"), orderBy("createdAt", "desc"));
      const snapshot = await getDocs(q);
      const videos = snapshot.docs.map(doc => doc.data());

      const container = document.getElementById("videos");

      if (videos.length === 0) {
        container.innerHTML = "<p style='color:gray'>No videos uploaded yet.</p>";
        return;
      }

      // Featured video
      const [featured, ...rest] = videos;
      container.innerHTML = `
        <div>
          <h2 style="color:red;font-size:24px">${featured.title}</h2>
          <video src="${featured.url}" controls autoplay muted style="width:100%;max-width:700px;border-radius:10px"></video>
        </div>
        <hr style="margin:2rem 0;border-color:#333">
        <div id="otherVideos" style="display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))"></div>
      `;

      const other = document.getElementById("otherVideos");
      rest.forEach(v => {
        other.innerHTML += `
          <div style="background:#111;padding:10px;border-radius:10px">
            <video src="${v.url}" controls style="width:100%;border-radius:8px"></video>
            <p style="color:white;text-align:center;margin-top:5px">${v.title}</p>
          </div>
        `;
      });
    }

    window.onload = loadVideos;
  </script>
  <style>
    body { background:black; color:white; font-family:Arial; text-align:center; padding:2rem; }
  </style>
</head>
<body>
  <h1 style="color:red">IAIWAF Video Hub</h1>
  <div id="videos"></div>
</body>
</html>
